(()=>{var e={};e.id=766,e.ids=[766],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},20219:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>j,routeModule:()=>h,serverHooks:()=>m,workAsyncStorage:()=>x,workUnitAsyncStorage:()=>y});var s={};t.r(s),t.d(s,{POST:()=>g});var o=t(42706),i=t(28203),a=t(45994),n=t(39187),c=t(65658);let u=process.env.RECRAFT_VECTORIZE_URL??"https://api.recraft.ai/v1/vectorize";async function p(e){let r=process.env.VECTORIZER_AI_KEY;if(!r)return null;let t=await fetch("https://api.vectorizer.ai/api/v1/vectorize",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({image_url:e,mode:"default"})});return t.ok?(await t.json()).vector_image??null:null}async function l(e){let r=process.env.RECRAFT_API_KEY;if(!r)return null;let t=await fetch(u,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({image_url:e})});return t.ok?(await t.json()).svg_url??null:null}let d=["vectorizer-ai","recraft-vectorizer"];async function v(e){for(let r of d)try{if("vectorizer-ai"===r){let r=await p(e);if(r)return{svgUrl:r,provider:"vectorizer-ai"}}else if("recraft-vectorizer"===r){let r=await l(e);if(r)return{svgUrl:r,provider:"recraft-vectorizer"}}}catch(e){continue}throw Error("All SVG conversion providers failed")}let f=c.Ik({pngUrl:c.Yj().url()});async function g(e){let r=await e.json().catch(()=>({})),t=f.safeParse(r);if(!t.success)return n.NextResponse.json({error:"Invalid body",details:t.error.flatten()},{status:400});let{pngUrl:s}=t.data;try{let e=await v(s);return n.NextResponse.json({svgUrl:e.svgUrl,provider:e.provider})}catch(e){return console.error(e),n.NextResponse.json({error:e instanceof Error?e.message:"SVG conversion failed"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/process/to-svg/route",pathname:"/api/process/to-svg",filename:"route",bundlePath:"app/api/process/to-svg/route"},resolvedPagePath:"/Users/berriesdesign/Documents/repos/illustration-agent/src/app/api/process/to-svg/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:x,workUnitAsyncStorage:y,serverHooks:m}=h;function j(){return(0,a.patchFetch)({workAsyncStorage:x,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,452,658],()=>t(20219));module.exports=s})();